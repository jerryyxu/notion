### â“ Typescript ç¼–è¯‘ä¹‹åç¼ºå°‘æ–‡ä»¶åç¼€çš„é—®é¢˜

```js
// 01.ts
import { hello } from "./02";
hello();

// 02.ts
export function hello(): void {
  console.log("Hello World");
}
```

`import` è·¯å¾„ä¸å¯ä»¥æ˜¯ `ts` ç»“å°¾ï¼š

![tsc error](../asserts/2021-08-10-14-08-43.png)

ä½†æ˜¯å¦‚æœå¿½ç•¥åç¼€ï¼Œé€šè¿‡ `npx tsc 01.ts --module es6` ç¼–è¯‘ä¹‹åçš„æ–‡ä»¶å†…å®¹ä¸­ä¹Ÿæ˜¯ç¼ºå°‘åç¼€çš„ï¼š

<img src="../asserts/2021-08-10-14-11-23.png" alt="01.js" width="270" />

é‚£ä¹ˆé€šè¿‡æµè§ˆå™¨æ‰“å¼€çš„æ—¶å€™ï¼Œå°±ä¼šæŠ¥ 404 é”™è¯¯ï¼š

<img src="../asserts/2021-08-10-14-12-29.png" alt="01.js" width="540" />

æ²¡æœ‰åœ¨ Typescript å®˜æ–¹æ–‡æ¡£ä¸­æ‰¾åˆ°å¯ä»¥é…ç½®é¡¹æˆ–å…¶å®ƒè§£å†³æ–¹æ¡ˆï¼Œä¸è¿‡å¯ä»¥é€šè¿‡ä»¥ä¸‹æ”¹åŠ¨ï¼Œé¿å…è¿™ä¸ªé—®é¢˜ï¼ˆæœ‰ç‚¹ hack çš„æ–¹å¼ï¼‰ï¼š

```ts
import { hello } from "./02.js";
```

### â— `CSP`ï¼ˆContent-Security-Policyï¼‰ [ğŸ”—](https://developer.mozilla.org/en-US/docs/Web/HTTP/CSP) çš„ nonce æ–¹æ¡ˆ

æµè§ˆå™¨ä¼šæ ¹æ®é¡µé¢å“åº”å¤´ä¿¡æ¯ä¸­çš„ `Content-Security-Policy` å­—æ®µä¸­è·å¾—å†…å®¹å®‰å…¨ç­–ç•¥ï¼Œå¦‚ä¸‹ä¾‹å­ä¸­ï¼Œè¦æ±‚è„šæœ¬è¯·æ±‚éœ€è¦åŒ¹é… `nonce` ä¿¡æ¯ï¼Œå¦åˆ™æµè§ˆå™¨å°±ä¼šæŠ¥é”™ï¼š

```js
let nonce = " 8IBTHwOdqNKAWeKl7plt8g==";

res.setHeader("Content-Security-Policy", `script-src 'nonce-${nonce}';`); // ä¸è¦å¿½ç•¥äº†å¼•å· '' ğŸ’¢

res.write(`
      <script nonce="${nonce}"> console.log('ok with nonce') </script>
      <script> console.log('ok without nonce') </script>
    `);
```

![Content-Security-Policy](../asserts/2021-08-10-15-38-35.png)

### â— `split(1)` vs `split(1, undefined)`

`Array.prototype.splice` çš„è¯­æ³•ï¼š

`splice(startIndex, deleteCount, item1, item2, itemN)`

å¦‚æœ `deleteCount` ç¼ºçœï¼ˆomittedï¼‰æˆ–è€…å¤§äº `array.length - start`ï¼Œåˆ™åˆ é™¤ä»å¼€å§‹ï¼ˆåŒ…å«å¼€å§‹ï¼‰åˆ°ç»“æŸçš„å…¨éƒ¨å…ƒç´ ï¼Œæ³¨æ„æ˜¯ç¼ºçœï¼ˆomittedï¼‰ï¼Œå¦‚æœä¼ å…¥çš„æ˜¯ `undefined`ï¼Œ`Number(undefined)` æ˜¯ `NaN`ï¼Œåˆ™ä¸åˆ é™¤ä»»ä½•å…ƒç´ ï¼š

```js
[0, 1, 2, 3].splice(1); // output: [1, 2, 3]
[0, 1, 2, 3].splice(1, undefined); // output: []
```

> ä½¿ç”¨ `in` åˆ¤æ–­ç¼ºçœè¿˜æ˜¯ `undefined` ï¼š
>
> ```js
> function fn() {
>   console.log(arguments[0] === undefined); // true ç”¨æˆ·ä¼ äº† undefined ä¹Ÿå¯èƒ½æ˜¯ true
>   console.log(0 in arguments); // false è¡¨ç¤ºç¼ºçœ
> }
> ```

### â— è·å–ä¼ªå…ƒç´ è®¡ç®—æ ·å¼ [ğŸ”—](https://developer.mozilla.org/en-US/docs/Web/API/Window/getComputedStyle#syntax)

`getComputedStyle` å¯ä»¥ä¼ ç¬¬äºŒå‚æ•°ï¼š`window.getComputedStyle(element, [pseudoElt])`
å¦‚ï¼š`window.getComputedStyle('div', '::before')`ã€‚

### â“ ç¦ç”¨å³é”®èœå•é»˜è®¤äº‹ä»¶ [ğŸ”—](https://developer.mozilla.org/en-US/docs/Web/API/GlobalEventHandlers/oncontextmenu)

```js
Element.oncontextmenu = (e) => {
  e.preventDefault();
};
```

### â“ suppressContentEditableWarning å±æ€§ [ğŸ”—](https://zh-hans.reactjs.org/docs/dom-elements.html#suppresscontenteditablewarning)

React ä¸­è®¾ç½®å…ƒç´  `contentEditable` å±æ€§ä¸º `true` ä¼šæœ‰ä»¥ä¸‹æç¤ºï¼Œé€šè¿‡è®¾ç½® `suppressContentEditableWarning` ä¸º `true` å¯ä»¥å»æ‰è¯¥æç¤ºã€‚è‡³äºä¸ºä»€ä¹ˆä¼šæœ‰ä¸‹é¢æç¤ºï¼Œæ˜¯å› ä¸ºåœ¨ React ä¸­ï¼ŒReact æ˜¯é€šè¿‡ç»´æŠ¤ä¸€ä¸ªè™šæ‹Ÿ DOM æ¥æ›´æ–°é¡µé¢ï¼Œä»»ä½•ä¸é€šè¿‡ React çš„ DOM æ“ä½œï¼Œéƒ½ä¼šç ´åè™šæ‹Ÿ DOM æ•°æ®è·Ÿå®é™… DOM ç»“æ„çš„å¯¹åº”å…³ç³»ã€‚

![React Warning](../asserts/2021-08-10-14-48-05.png)

### â“ Typescript `!` åç¼€

Typescript ä¸­ä½¿ç”¨ `!` åç¼€ï¼Œç”¨æ¥æ’é™¤ `null` å’Œ `undefined` çš„å¯èƒ½æ€§ã€‚

```ts
const fn = (v: object) => {};
let b: object | null | undefined = null;

!b && fn(b!); // å¦‚æœä¸åŠ ä¸Š `!` åç¼€ï¼Œts ä¼šå‘Šè­¦
```

### â— `String.prototype.match` [ğŸ”—](https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/String/match)

`String.prototype.match` æ–¹æ³•è¦æ±‚ä¼ å…¥çš„å‚æ•°æ˜¯ä¸€ä¸ª `RegExp` å¯¹è±¡ï¼Œå¦‚æœä¼ å…¥é `RegExp` å¯¹è±¡ï¼Œä¼šéšå¼é€šè¿‡ `new RegExp(regexp)` çš„æ–¹å¼è¿›è¡Œè½¬æ¢ï¼š

```js
"$str".match("$str"); // false
"$str".match("\\$str"); // true
```
